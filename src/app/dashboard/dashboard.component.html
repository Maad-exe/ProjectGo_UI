<div class="dashboard-container">
  <!-- Simplified Sidebar -->
  <aside class="sidebar">
    <nav class="sidebar-nav">
      <a (click)="showAddUserModal()" class="nav-item">
        <i class="fas fa-user-plus"></i>
        <span>Add User</span>
      </a>
      <a routerLink="/dashboard" class="nav-item active">
        <i class="fas fa-home"></i>
        <span>Dashboard</span>
      </a>
      <a routerLink="/users" class="nav-item">
        <i class="fas fa-users"></i>
        <span>Users</span>
      </a>
      <a routerLink="/projects" class="nav-item">
        <i class="fas fa-project-diagram"></i>
        <span>Projects</span>
      </a>
      <a routerLink="/evaluations" class="nav-item">
        <i class="fas fa-tasks"></i>
        <span>Evaluations</span>
      </a>
    </nav>
  </aside>

  <!-- Add User Modal -->
  <div class="modal" *ngIf="isAddUserModalOpen">
    <div class="modal-content">
      <div class="modal-header">
        <h2>{{ addUserForm.get('role')?.value === 'Student' ? 'Add New Student' : 
              addUserForm.get('role')?.value === 'Teacher' ? 'Add New Teacher' : 
              'Add New Admin' }}</h2>
        <button class="close-btn" (click)="closeAddUserModal()">
          <i class="fas fa-times"></i>
        </button>
      </div>
      
      <form [formGroup]="addUserForm" (ngSubmit)="onAddUser()">
        <!-- Full Name -->
        <div class="form-group">
          <label>Full Name</label>
          <input type="text" formControlName="fullName" placeholder="Enter full name">
          <div class="error-message" *ngIf="addUserForm.get('fullName')?.touched && addUserForm.get('fullName')?.invalid">
            <span *ngIf="addUserForm.get('fullName')?.errors?.['required']">Full name is required</span>
            <span *ngIf="addUserForm.get('fullName')?.errors?.['minlength']">Name must be at least 3 characters</span>
          </div>
        </div>
        
        <!-- Email -->
        <div class="form-group">
          <label>Email</label>
          <input type="email" formControlName="email" placeholder="Enter email">
          <div class="error-message" *ngIf="addUserForm.get('email')?.touched && addUserForm.get('email')?.invalid">
            <span *ngIf="addUserForm.get('email')?.errors?.['required']">Email is required</span>
            <span *ngIf="addUserForm.get('email')?.errors?.['email']">Please enter a valid email address</span>
          </div>
        </div>
        
        <!-- Password -->
        <div class="form-group">
          <label>Password</label>
          <div class="password-input">
            <input [type]="showPassword ? 'text' : 'password'" formControlName="password" placeholder="Enter password">
            <i class="fas" [class.fa-eye]="!showPassword" [class.fa-eye-slash]="showPassword" (click)="togglePassword()"></i>
          </div>
          <div class="error-message" *ngIf="addUserForm.get('password')?.touched && addUserForm.get('password')?.invalid">
            <span *ngIf="addUserForm.get('password')?.errors?.['required']">Password is required</span>
            <span *ngIf="addUserForm.get('password')?.errors?.['minlength']">Password must be at least 6 characters</span>
          </div>
        </div>
        
        <!-- Role Selection -->
        <div class="form-group">
          <label>Role</label>
          <select formControlName="role" class="role-select">
            <option value="Admin">Admin</option>
            <option value="Teacher">Teacher</option>
            <option value="Student">Student</option>
          </select>
        </div>
      
        <!-- Teacher-specific fields -->
        <div class="role-specific-fields" *ngIf="addUserForm.get('role')?.value === 'Teacher'">
          <div class="form-group">
            <label>Qualification</label>
            <input type="text" formControlName="qualification" placeholder="Enter qualification">
            <div class="error-message" *ngIf="addUserForm.get('qualification')?.touched && addUserForm.get('qualification')?.invalid">
              <span *ngIf="addUserForm.get('qualification')?.errors?.['required']">Qualification is required</span>
            </div>
          </div>
          
          <div class="form-group">
            <label>Area of Specialization</label>
            <input type="text" formControlName="areaOfSpecialization" placeholder="Enter specialization">
            <div class="error-message" *ngIf="addUserForm.get('areaOfSpecialization')?.touched && addUserForm.get('areaOfSpecialization')?.invalid">
              <span *ngIf="addUserForm.get('areaOfSpecialization')?.errors?.['required']">Area of specialization is required</span>
            </div>
          </div>
          
          <div class="form-group">
            <label>Office Location</label>
            <input type="text" formControlName="officeLocation" placeholder="Enter office location">
            <div class="error-message" *ngIf="addUserForm.get('officeLocation')?.touched && addUserForm.get('officeLocation')?.invalid">
              <span *ngIf="addUserForm.get('officeLocation')?.errors?.['required']">Office location is required</span>
            </div>
          </div>
        </div>
      
        <!-- Student-specific fields -->
        <div class="role-specific-fields" *ngIf="addUserForm.get('role')?.value === 'Student'">
          <div class="form-group">
            <label>Enrollment Number</label>
            <input type="text" formControlName="enrollmentNumber" placeholder="Enter enrollment number">
            <div class="error-message" *ngIf="addUserForm.get('enrollmentNumber')?.touched && addUserForm.get('enrollmentNumber')?.invalid">
              <span *ngIf="addUserForm.get('enrollmentNumber')?.errors?.['required']">Enrollment number is required</span>
            </div>
          </div>
          
          <div class="form-group">
            <label>Department</label>
            <input type="text" formControlName="department" placeholder="Enter department">
            <div class="error-message" *ngIf="addUserForm.get('department')?.touched && addUserForm.get('department')?.invalid">
              <span *ngIf="addUserForm.get('department')?.errors?.['required']">Department is required</span>
            </div>
          </div>
        </div>
        
        <!-- Form Actions -->
        <div class="modal-footer">
          <button type="button" class="btn-cancel" (click)="closeAddUserModal()">
            <i class="fas fa-times"></i> Cancel
          </button>
          <button type="submit" class="btn-submit" [disabled]="addUserForm.invalid || isLoading">
            <i class="fas fa-save"></i> {{ isLoading ? 'Adding...' : 'Add User' }}
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Main Content -->
  <main class="main-content">
    <header class="topbar">
      <div class="topHeading">Admin Dashboard</div>
      <div class="search-bar">
        <i class="fas fa-search"></i>
        <input type="text" placeholder="Search...">
      </div>
      
      <div class="topbar-right">
        <div class="user-info">
          <div class="user-details">
            <p class="name">{{userData.name}}</p>
            <p class="role">{{userData.role}}</p>
          </div>
          <button class="logout-btn" (click)="logout()">
            <i class="fas fa-sign-out-alt"></i>
            Logout
          </button>
        </div>
      </div>
    </header>

    <div class="dashboard-content">
      <div class="stats-grid">
        <div class="stat-card students">
          <div class="stat-content">
            <h3>Students</h3>
            <p>{{statistics.totalStudents}}</p>
          </div>
        </div>
        
        <div class="stat-card teachers">
          <div class="stat-content">
            <h3>Teachers</h3>
            <p>{{statistics.totalTeachers}}</p>
          </div>
        </div>
        
        <div class="stat-card projects">
          <div class="stat-content">
            <h3>Projects</h3>
            <p>{{statistics.activeProjects}}</p>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>