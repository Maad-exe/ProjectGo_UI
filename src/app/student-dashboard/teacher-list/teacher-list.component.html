<!-- src/app/student-dashboard/teacher-list/teacher-list.component.html -->
<div class="teacher-list-container">
  <div class="section-header">
    <div class="header-with-back">
      <button class="back-button" (click)="navigateBack()">
        <i class="fas fa-arrow-left"></i> Back
      </button>
      <h2 class="section-title">Find a Supervisor for Your Group</h2>
    </div>
    <p class="section-subtitle">Connect with faculty members to supervise your project</p>
  </div>

  <!-- Group Selection -->
  <div class="group-selection" *ngIf="groups.length > 0 && !selectedGroupId">
    <h3>Select a group to request supervision</h3>
    
    <div class="group-cards">
      <div class="group-card" *ngFor="let group of groups">
        <h4>Group: {{group.name}}</h4>
        <p>Members: {{group.members.length}}</p>
        <p>Created: {{group.createdAt | date:'mediumDate'}}</p>
        <button class="select-group-btn" (click)="selectGroup(group.id)">
          <i class="fas fa-check-circle"></i> Select This Group
        </button>
      </div>
    </div>
  </div>
  
  <div class="no-groups" *ngIf="groups.length === 0 && !isLoadingGroups && !groupError">
    <i class="fas fa-users-slash"></i>
    <h3>No Available Groups</h3>
    <p>You don't have any groups without a supervisor. Create a group first or check your existing groups.</p>
    <button [routerLink]="['/student-dashboard']" [queryParams]="{view: 'groups'}">
      <i class="fas fa-plus-circle"></i> Create Group
    </button>
  </div>

  <!-- Loading State for Groups -->
  <div class="loading-state" *ngIf="isLoadingGroups">
    <div class="spinner"></div>
    <h3>Loading your groups...</h3>
    <p>Please wait while we retrieve your group information.</p>
  </div>

  <!-- Error State for Groups -->
  <div class="error-state" *ngIf="groupError">
    <i class="fas fa-exclamation-triangle"></i>
    <h3>Error Loading Groups</h3>
    <p>{{groupError}}</p>
    <button (click)="loadStudentGroups()">
      <i class="fas fa-redo"></i> Retry
    </button>
  </div>
  
  <!-- Teacher Grid (only show when group is selected) -->
  <div class="teacher-grid" *ngIf="selectedGroupId && !isLoadingGroups">
    <div class="selected-group">
      Selected Group: <span>{{getGroupById(selectedGroupId)?.name}}</span>
      <button class="change-group-btn" (click)="selectedGroupId = null">
        <i class="fas fa-exchange-alt"></i> Change Group
      </button>
    </div>
    
    <!-- Loading State for Teachers -->
    <div class="loading-state" *ngIf="isLoading">
      <div class="spinner"></div>
      <h3>Loading faculty members...</h3>
      <p>Please wait while we retrieve the list of teachers.</p>
    </div>
    
    <!-- Error State for Teachers -->
    <div class="error-state" *ngIf="error">
      <i class="fas fa-exclamation-triangle"></i>
      <h3>Error Loading Teachers</h3>
      <p>{{error}}</p>
      <button (click)="loadTeachers()">
        <i class="fas fa-redo"></i> Retry
      </button>
    </div>
    
    <!-- Teacher Cards -->
    <div *ngIf="!isLoading && !error && teachers.length > 0">
      <div class="teacher-card" *ngFor="let teacher of teachers">
        <div class="card-header">
          <div class="teacher-avatar">
            <i class="fas fa-user-tie"></i>
          </div>
          <div class="teacher-primary-info">
            <h3>{{teacher.fullName}}</h3>
            <span class="department">Computer Science Department</span>
          </div>
        </div>
        <div class="card-body">
          <div class="info-section">
            <h4>Specialization</h4>
            <p>{{teacher.areaOfSpecialization}}</p>
            <h4>Assigned Groups</h4>
            <p>{{teacher.assignedGroups || 0}}</p>
          </div>
          <div class="info-section">
            <h4>Qualification</h4>
            <p>{{teacher.qualification}}</p>
          </div>
          <div class="contact-details">
            <a href="mailto:{{teacher.email}}" class="contact-item">
              <i class="fas fa-envelope"></i>
              <span>{{teacher.email}}</span>
            </a>
            <div class="contact-item">
              <i class="fas fa-location-dot"></i>
              <span>{{teacher.officeLocation}}</span>
            </div>
          </div>
        </div>
        <div class="card-footer">
          <div class="message-input" *ngIf="!isRequestingSupervision">
            <label for="requestMessage">Message for teacher (optional):</label>
            <textarea id="requestMessage" [(ngModel)]="requestMessage" 
                      placeholder="Briefly describe your project or why you'd like this teacher to supervise your group"></textarea>
          </div>
          <button class="request-btn" (click)="requestSupervision(teacher.id)" 
                  [disabled]="isRequestingSupervision">
            <i class="fas" [class.fa-paper-plane]="!isRequestingSupervision" [class.fa-spinner]="isRequestingSupervision" [class.fa-spin]="isRequestingSupervision"></i>
            {{isRequestingSupervision ? 'Sending Request...' : 'Request Supervision'}}
          </button>
        </div>
      </div>
    </div>
    
    <div class="no-teachers" *ngIf="!isLoading && !error && teachers.length === 0">
      <i class="fas fa-user-slash"></i>
      <h3>No Teachers Available</h3>
      <p>There are currently no teachers available for supervision.</p>
    </div>
  </div>
</div>
